# 1. list - 피처 그룹 목록 조회

## 개요
모든 SageMaker Feature Group의 목록을 조회하고 상세 정보를 표시합니다.

## 기본 사용법
```bash
fs list [OPTIONS]
```

## 옵션
- `--output-format, -o`: 출력 형식 선택 (`table`, `json`)
- `--profile`: AWS 프로필 지정
- `--region`: AWS 리전 지정

## 상세 사용 예시

### 1. 기본 테이블 형태 조회
```bash
fs list
```

**출력 예시:**
```
+----------------------------------+----------+------------------+---------------+----------+--------------------+-------------------+---------------+---------------------------+---------------------+
| FeatureGroupName                 | Status   | IngestMode       | StorageType   | TTL      | EventTimeFeature   | RecordIdFeature   | TableFormat   | AthenaTable               | CreationTime        |
+==================================+==========+==================+===============+==========+====================+===================+===============+===========================+=====================+
| customer-profile-fg              | Created  | Online + Offline | N/A           | 365 Days | event_time         | customer_id       | Glue          | sagemaker_featurestore... | 2024-01-15 10:30:00 |
+----------------------------------+----------+------------------+---------------+----------+--------------------+-------------------+---------------+---------------------------+---------------------+
```

### 2. JSON 형태로 조회
```bash
fs list --output-format json
```

**출력 예시:**
```json
[
  {
    "FeatureGroupName": "customer-profile-fg",
    "FeatureGroupStatus": "Created",
    "IngestMode": "Online + Offline",
    "StorageType": "N/A",
    "TTLValue": "365 Days",
    "EventTimeFeatureName": "event_time",
    "RecordIdentifierFeatureName": "customer_id",
    "CreationTime": "2024-01-15 10:30:00",
    "OfflineS3Uri": "s3://my-bucket/feature-store/",
    "TableFormat": "Glue",
    "AthenaTable": "sagemaker_featurestore.customer_profile_fg_123456",
    "OnlineStoreConfig": {
      "EnableOnlineStore": true,
      "TtlDuration": {
        "Unit": "Days",
        "Value": 365
      }
    },
    "OfflineStoreConfig": {
      "S3StorageConfig": {
        "S3Uri": "s3://my-bucket/feature-store/"
      },
      "TableFormat": "Glue"
    }
  }
]
```

### 3. 특정 AWS 프로필 사용
```bash
fs --profile production list
```

### 4. 특정 리전 지정
```bash
fs --region us-west-2 list
```

### 5. 프로필과 리전 함께 사용
```bash
fs --profile production --region us-west-2 list --output-format json
```

## 출력 필드 설명

| 필드명 | 설명 |
|--------|------|
| **FeatureGroupName** | Feature Group의 이름 |
| **Status** | 현재 상태 (Created, Creating, CreateFailed 등) |
| **IngestMode** | 데이터 수집 모드 (Online, Offline, Online + Offline) |
| **StorageType** | 스토리지 타입 정보 |
| **TTL** | Online Store의 TTL 설정 (예: 365 Days, N/A) |
| **EventTimeFeature** | 이벤트 시간 필드명 |
| **RecordIdFeature** | 레코드 식별자 필드명 |
| **TableFormat** | 오프라인 스토어 테이블 형식 (Glue, Iceberg) |
| **AthenaTable** | 대응하는 Athena 테이블명 |
| **CreationTime** | 생성 시간 |

## IngestMode 종류
- **Online**: Online Store만 활성화 (실시간 조회용)
- **Offline**: Offline Store만 활성화 (배치 분석용)
- **Online + Offline**: 둘 다 활성화 (하이브리드 모드)

## 일반적인 사용 시나리오

### 1. 모든 Feature Group 현황 파악
```bash
# 간단한 테이블 뷰로 전체 현황 확인
fs list

# 상세 정보가 필요한 경우 JSON으로 출력
fs list -o json | jq '.[].FeatureGroupName'
```

### 2. 특정 조건의 Feature Group 필터링
```bash
# TTL이 설정된 Feature Group만 조회
fs list -o json | jq '.[] | select(.TTLValue != "N/A")'

# Online + Offline 모드인 것만 조회
fs list -o json | jq '.[] | select(.IngestMode == "Online + Offline")'

# 특정 날짜 이후 생성된 것만 조회
fs list -o json | jq '.[] | select(.CreationTime > "2024-01-01")'
```

### 3. 리전별 Feature Group 조회
```bash
# 여러 리전의 Feature Group 조회
for region in us-east-1 us-west-2 ap-northeast-2; do
  echo "=== $region ==="
  fs --region $region list
done
```

### 4. Feature Group 상태 모니터링
```bash
# 생성 중인 Feature Group 확인
fs list -o json | jq '.[] | select(.FeatureGroupStatus == "Creating")'

# 실패한 Feature Group 확인
fs list -o json | jq '.[] | select(.FeatureGroupStatus == "CreateFailed")'
```

## 문제 해결

### 권한 오류
```bash
# 오류: AccessDenied
# 해결: IAM 역할에 다음 권한 추가 필요
# - sagemaker:ListFeatureGroups
# - sagemaker:DescribeFeatureGroup
```

### 빈 목록
```bash
# Feature Group이 없는 경우
"피처 그룹을 찾을 수 없습니다."

# 다른 리전에 있을 가능성 확인
fs --region us-east-1 list
fs --region us-west-2 list
```

### Athena 테이블 정보 오류
```bash
# "Unable to check" 또는 "Table not found" 표시
# 원인: Athena 접근 권한 부족 또는 Glue Data Catalog 권한 부족
# 해결: IAM에 다음 권한 추가
# - athena:ListTableMetadata
# - glue:GetTable
# - glue:GetTables
```

## 모범 사례

1. **정기적인 현황 파악**: 주기적으로 `fs list`를 실행하여 Feature Group 현황 모니터링
2. **JSON 출력 활용**: 자동화 스크립트에서는 JSON 형태로 출력하여 파싱
3. **리전별 관리**: 여러 리전을 사용하는 경우 리전별로 조회하여 관리
4. **TTL 모니터링**: TTL 설정된 Feature Group의 만료일 추적

## 관련 명령어
- `fs get`: 특정 Feature Group의 레코드 조회
- `fs schema`: Feature Group의 스키마 정보 조회
- `fs analyze`: Feature Group의 스토리지 사용량 분석