# 1단계: List 기능 개선 상세 계획

## 현재 상황 분석

### 기존 동작
- **파일**: `src/sagemaker_fs_cli/commands/list_cmd.py:25`
- **필터 조건**: `if fg_details.get('OnlineStoreConfig'):`
- **결과**: 온라인 스토어가 활성화된 피처그룹만 표시

### 기존 출력 정보
```
FeatureGroupName | Status | IngestMode | StorageType | TTL | EventTimeFeature | RecordIdFeature | TableFormat | CreationTime
```

## 요구사항
- 오프라인 전용 피처그룹도 목록에 표시
- 온라인+오프라인, 오프라인 전용 구분 명확히 표시

## 변경 계획

### 1. 필터 조건 수정
**위치**: `list_cmd.py:25`

**기존**:
```python
if fg_details.get('OnlineStoreConfig'):
```

**변경**:
```python
# 온라인 또는 오프라인 스토어가 하나라도 있으면 포함
online_config = fg_details.get('OnlineStoreConfig')
offline_config = fg_details.get('OfflineStoreConfig')

if online_config or offline_config:
```

### 2. IngestMode 로직 개선
**위치**: `list_cmd.py:41-47`

**기존 로직**:
- 온라인 스토어만 고려하여 IngestMode 결정

**개선된 로직**:
- 온라인 전용: "Online"
- 오프라인 전용: "Offline" 
- 온라인+오프라인: "Online + Offline"

### 3. 오프라인 전용 그룹 정보 처리
**새로운 처리 로직**:
- 온라인 스토어 정보가 없는 경우의 기본값 설정
- StorageType: "N/A" (온라인 스토어 없음)
- TTL: "N/A" (온라인 스토어 없음)

### 4. 테이블 출력 개선
**위치**: `src/sagemaker_fs_cli/utils/formatter.py:31-59`

**현재 헤더**:
```python
headers = [
    'FeatureGroupName', 'Status', 'IngestMode', 'StorageType', 'TTL',
    'EventTimeFeature', 'RecordIdFeature', 'TableFormat', 'CreationTime'
]
```

**개선점**:
- IngestMode 컬럼을 더 명확하게 표시
- 오프라인 전용 그룹의 경우 StorageType, TTL은 "N/A"로 표시
- TableFormat는 오프라인 스토어 설정에서 가져오기

## 구현 단계

### Step 1: list_cmd.py 수정
1. **필터 조건 변경** (라인 25)
2. **IngestMode 로직 개선** (라인 41-47) 
3. **오프라인 전용 그룹 처리** (라인 26-62)

### Step 2: 테스트 케이스 정의
- 온라인 전용 피처그룹
- 오프라인 전용 피처그룹  
- 온라인+오프라인 피처그룹
- 빈 결과 처리

## 예상 결과

### Before (현재)
```
FeatureGroupName | Status    | IngestMode      | StorageType | TTL | ...
my-online-fg     | Created   | Online          | Standard    | N/A | ...
my-hybrid-fg     | Created   | Online + Offline| Standard    | N/A | ...
```

### After (개선 후)
```
FeatureGroupName | Status    | IngestMode      | StorageType | TTL | TableFormat | ...
my-online-fg     | Created   | Online          | Standard    | N/A | N/A         | ...
my-offline-fg    | Created   | Offline         | N/A         | N/A | Iceberg     | ...
my-hybrid-fg     | Created   | Online + Offline| Standard    | N/A | Iceberg     | ...
```

## 코드 변경 포인트

### 1. list_cmd.py - 필터 로직
```python
# 라인 25 변경
if online_config or offline_config:
```

### 2. list_cmd.py - IngestMode 결정 로직
```python
# 라인 41-47 변경
ingest_mode = []
if online_config:
    ingest_mode.append('Online')
if offline_config:
    ingest_mode.append('Offline')
ingest_mode_str = ' + '.join(ingest_mode) if ingest_mode else 'Unknown'
```

### 3. list_cmd.py - 오프라인 전용 그룹 처리
```python
# 온라인 스토어 정보 (없을 수 있음)
storage_type = online_config.get('StorageType', 'N/A') if online_config else 'N/A'
ttl_duration = online_config.get('TtlDuration') if online_config else None
```

## 검증 방법
1. 온라인 전용 피처그룹이 있는 환경에서 테스트
2. 오프라인 전용 피처그룹이 있는 환경에서 테스트  
3. 혼합 환경에서 테스트
4. 빈 환경에서 테스트

## 위험도 평가
- **위험도**: 낮음
- **영향 범위**: list 명령어만
- **호환성**: 기존 기능에 영향 없음
- **롤백**: 쉬움 (단순 조건문 변경)